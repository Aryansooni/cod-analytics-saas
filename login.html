<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Login — COD Analytics</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<style>
:root {
  --cream:   #F4F3EE;
  --white:   #FFFFFF;
  --ink:     #141414;
  --ink2:    #2A2A2A;
  --muted:   #6E6E6E;
  --faint:   #A8A8A0;
  --line:    #DDDDD6;
  --green:   #1A7A4A;
  --green-bg:#E8F5EE;
  --blue:    #1B4FD8;
  --blue-bg: #EEF2FF;
  --red:     #B91C1C;
  --display: 'Syne', sans-serif;
  --body:    'DM Sans', sans-serif;
}

*, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }

body {
  background: var(--cream);
  color: var(--ink);
  font-family: var(--body);
  font-size: 14px;
  line-height: 1.5;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  -webkit-font-smoothing: antialiased;
}

.login-container {
  width: 100%;
  max-width: 440px;
}

.logo-section {
  text-align: center;
  margin-bottom: 32px;
}

.logo-mark {
  width: 56px;
  height: 56px;
  background: var(--ink);
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16px;
}

.logo-mark svg { width: 28px; height: 28px; }

.logo-title {
  font-family: var(--display);
  font-size: 26px;
  font-weight: 800;
  color: var(--ink);
  letter-spacing: -.02em;
  margin-bottom: 6px;
}

.logo-subtitle {
  font-size: 14px;
  color: var(--muted);
}

.auth-card {
  background: var(--white);
  border: 1px solid var(--line);
  border-radius: 20px;
  padding: 40px 36px;
  box-shadow: 0 4px 20px rgba(0,0,0,.04);
}

.auth-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 28px;
  background: var(--cream);
  border-radius: 12px;
  padding: 4px;
}

.auth-tab {
  flex: 1;
  padding: 10px;
  border: none;
  background: transparent;
  border-radius: 8px;
  font-family: var(--body);
  font-size: 14px;
  font-weight: 600;
  color: var(--muted);
  cursor: pointer;
  transition: all .15s;
}

.auth-tab.active {
  background: var(--white);
  color: var(--ink);
  box-shadow: 0 1px 3px rgba(0,0,0,.06);
}

.form-group {
  margin-bottom: 20px;
}

.form-label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--ink);
  margin-bottom: 8px;
}

.form-input {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--line);
  border-radius: 10px;
  font-family: var(--body);
  font-size: 14px;
  color: var(--ink);
  background: var(--white);
  transition: all .15s;
}

.form-input:focus {
  outline: none;
  border-color: var(--blue);
  box-shadow: 0 0 0 3px var(--blue-bg);
}

.form-input::placeholder {
  color: var(--faint);
}

.form-checkbox-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 20px;
}

.form-checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.form-checkbox-label {
  font-size: 13px;
  color: var(--muted);
  cursor: pointer;
}

.btn-primary {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 10px;
  background: var(--ink);
  color: var(--white);
  font-family: var(--body);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all .15s;
}

.btn-primary:hover {
  background: var(--ink2);
  transform: translateY(-1px);
  box-shadow: 0 4px 16px rgba(0,0,0,.18);
}

.btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.divider {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 24px 0;
  color: var(--faint);
  font-size: 12px;
}

.divider::before,
.divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--line);
}

.btn-google {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--line);
  border-radius: 10px;
  background: var(--white);
  color: var(--ink);
  font-family: var(--body);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all .15s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-google:hover {
  background: var(--cream);
  border-color: var(--ink);
}

.pricing-info {
  margin-top: 24px;
  padding: 16px;
  background: var(--green-bg);
  border: 1px solid #c8e6d7;
  border-radius: 12px;
  text-align: center;
}

.pricing-info-title {
  font-family: var(--display);
  font-size: 16px;
  font-weight: 700;
  color: var(--green);
  margin-bottom: 4px;
}

.pricing-info-text {
  font-size: 12px;
  color: var(--green);
  opacity: 0.8;
}

.error-message {
  padding: 12px 14px;
  background: #FEE2E2;
  border: 1px solid #FCA5A5;
  border-radius: 8px;
  color: var(--red);
  font-size: 13px;
  margin-bottom: 16px;
  display: none;
}

.error-message.show { display: block; }

.footer-links {
  text-align: center;
  margin-top: 24px;
  font-size: 12px;
  color: var(--muted);
}

.footer-links a {
  color: var(--blue);
  text-decoration: none;
  font-weight: 600;
}

.footer-links a:hover {
  text-decoration: underline;
}

@media(max-width:480px){
  .auth-card { padding: 28px 24px; }
  .logo-title { font-size: 22px; }
}
</style>
</head>
<body>

<div class="login-container">
  <div class="logo-section">
    <div class="logo-mark">
      <svg viewBox="0 0 14 14" fill="none">
        <rect x="1" y="1" width="5" height="5" rx="1.5" fill="white"/>
        <rect x="8" y="1" width="5" height="5" rx="1.5" fill="white" opacity=".5"/>
        <rect x="1" y="8" width="5" height="5" rx="1.5" fill="white" opacity=".5"/>
        <rect x="8" y="8" width="5" height="5" rx="1.5" fill="white"/>
      </svg>
    </div>
    <h1 class="logo-title">COD Analytics</h1>
    <p class="logo-subtitle">Real-time delivery performance tracking</p>
  </div>

  <div class="auth-card">
    <div class="auth-tabs">
      <button class="auth-tab active" onclick="switchTab('login')">Login</button>
      <button class="auth-tab" onclick="switchTab('signup')">Sign Up</button>
    </div>

    <div class="error-message" id="errorMessage"></div>

    <!-- LOGIN FORM -->
    <form id="loginForm" style="display:block;">
      <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-input" placeholder="you@company.com" id="loginEmail" required/>
      </div>

      <div class="form-group">
        <label class="form-label">Password</label>
        <input type="password" class="form-input" placeholder="••••••••" id="loginPassword" required/>
      </div>

      <div class="form-checkbox-wrapper">
        <input type="checkbox" class="form-checkbox" id="rememberMe"/>
        <label class="form-checkbox-label" for="rememberMe">Remember me</label>
      </div>

      <button type="submit" class="btn-primary">Login to Dashboard</button>
    </form>

    <!-- SIGNUP FORM -->
    <form id="signupForm" style="display:none;">
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input type="text" class="form-input" placeholder="John Doe" id="signupName" required/>
      </div>

      <div class="form-group">
        <label class="form-label">Company Name</label>
        <input type="text" class="form-input" placeholder="Your Company Pvt Ltd" id="signupCompany" required/>
      </div>

      <div class="form-group">
        <label class="form-label">Phone Number</label>
        <input type="tel" class="form-input" placeholder="+91 98765 43210" id="signupPhone" required/>
      </div>

      <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-input" placeholder="you@company.com" id="signupEmail" required/>
      </div>

      <div class="form-group">
        <label class="form-label">Password</label>
        <input type="password" class="form-input" placeholder="••••••••" id="signupPassword" required/>
      </div>

      <div class="form-checkbox-wrapper">
        <input type="checkbox" class="form-checkbox" id="agreeTerms" required/>
        <label class="form-checkbox-label" for="agreeTerms">I agree to Terms & Conditions</label>
      </div>

      <button type="submit" class="btn-primary">Create Account</button>

      <div class="pricing-info">
        <div class="pricing-info-title">₹199/month</div>
        <div class="pricing-info-text">7-day free trial • Cancel anytime</div>
      </div>
    </form>

    <div class="divider">or</div>

    <button class="btn-google" onclick="loginWithGoogle()">
      <svg width="18" height="18" viewBox="0 0 18 18">
        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
        <path fill="#FBBC05" d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"/>
        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
      </svg>
      Continue with Google
    </button>
  </div>

  <div class="footer-links">
    <a href="#">Forgot password?</a> · <a href="#">Contact Support</a>
  </div>
</div>

<script>
// Tab switching
function switchTab(tab) {
  const tabs = document.querySelectorAll('.auth-tab');
  const loginForm = document.getElementById('loginForm');
  const signupForm = document.getElementById('signupForm');
  
  tabs.forEach(t => t.classList.remove('active'));
  
  if(tab === 'login') {
    tabs[0].classList.add('active');
    loginForm.style.display = 'block';
    signupForm.style.display = 'none';
  } else {
    tabs[1].classList.add('active');
    loginForm.style.display = 'none';
    signupForm.style.display = 'block';
  }
  
  hideError();
}

// Error handling
function showError(message) {
  const errorEl = document.getElementById('errorMessage');
  errorEl.textContent = message;
  errorEl.classList.add('show');
}

function hideError() {
  document.getElementById('errorMessage').classList.remove('show');
}

// Login form submission
document.getElementById('loginForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  hideError();
  
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  const remember = document.getElementById('rememberMe').checked;
  
  try {
    // TODO: Replace with actual API call
    const response = await fetch('/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password, remember })
    });
    
    const data = await response.json();
    
    if(response.ok) {
      // Store token
      localStorage.setItem('authToken', data.token);
      localStorage.setItem('userData', JSON.stringify(data.user));
      // Redirect to dashboard
      window.location.href = 'dashboard.html';
    } else {
      showError(data.message || 'Login failed. Please check your credentials.');
    }
  } catch(error) {
    // Demo mode - bypass authentication for testing
    console.log('Demo login:', email);
    localStorage.setItem('authToken', 'demo-token-' + Date.now());
    localStorage.setItem('userData', JSON.stringify({
      email: email,
      name: 'Demo User',
      company: 'Demo Company',
      subscription: 'active',
      trial: false
    }));
    window.location.href = 'dashboard.html';
  }
});

// Signup form submission
document.getElementById('signupForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  hideError();
  
  const name = document.getElementById('signupName').value;
  const company = document.getElementById('signupCompany').value;
  const phone = document.getElementById('signupPhone').value;
  const email = document.getElementById('signupEmail').value;
  const password = document.getElementById('signupPassword').value;
  const agreed = document.getElementById('agreeTerms').checked;
  
  if(!agreed) {
    showError('Please agree to Terms & Conditions');
    return;
  }
  
  try {
    // TODO: Replace with actual API call
    const response = await fetch('/api/auth/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, company, phone, email, password })
    });
    
    const data = await response.json();
    
    if(response.ok) {
      localStorage.setItem('authToken', data.token);
      localStorage.setItem('userData', JSON.stringify(data.user));
      window.location.href = 'dashboard.html';
    } else {
      showError(data.message || 'Signup failed. Please try again.');
    }
  } catch(error) {
    // Demo mode
    console.log('Demo signup:', email);
    localStorage.setItem('authToken', 'demo-token-' + Date.now());
    localStorage.setItem('userData', JSON.stringify({
      email: email,
      name: name,
      company: company,
      phone: phone,
      subscription: 'trial',
      trial: true,
      trialDaysLeft: 7
    }));
    window.location.href = 'dashboard.html';
  }
});

// Google login
function loginWithGoogle() {
  // TODO: Implement Google OAuth
  showError('Google login coming soon!');
}
</script>

</body>
</html>
